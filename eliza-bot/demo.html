<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ELIZA èŠå¤©æœºå™¨äººæ¼”ç¤º - AI å‘å±•å†å²</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            height: calc(100vh - 40px);
        }

        .panel {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .panel-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
        }

        .panel-header small {
            display: block;
            font-size: 14px;
            font-weight: normal;
            margin-top: 5px;
            opacity: 0.9;
        }

        /* å·¦ä¾§èŠå¤©é¢æ¿ */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f5f5f5;
        }

        .message {
            margin-bottom: 15px;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .message-content {
            padding: 12px 16px;
            border-radius: 10px;
            max-width: 80%;
            word-wrap: break-word;
        }

        .user-message .message-content {
            background: #667eea;
            color: white;
            margin-left: auto;
            text-align: right;
        }

        .bot-message .message-content {
            background: white;
            color: #333;
            border: 2px solid #e0e0e0;
        }

        .system-message {
            text-align: center;
            color: #999;
            font-size: 14px;
            font-style: italic;
            margin: 20px 0;
        }

        .chat-input-area {
            padding: 20px;
            background: white;
            border-top: 2px solid #e0e0e0;
        }

        .quick-questions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }

        .quick-btn {
            padding: 8px 15px;
            background: #f0f0f0;
            border: 2px solid #667eea;
            border-radius: 20px;
            cursor: pointer;
            font-size: 13px;
            color: #667eea;
            transition: all 0.3s;
        }

        .quick-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .input-group {
            display: flex;
            gap: 10px;
        }

        #userInput {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s;
        }

        #userInput:focus {
            border-color: #667eea;
        }

        #sendBtn {
            padding: 12px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: transform 0.2s;
        }

        #sendBtn:hover {
            transform: scale(1.05);
        }

        #sendBtn:active {
            transform: scale(0.95);
        }

        /* å³ä¾§è§£æé¢æ¿ */
        .analysis-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .analysis-section {
            background: #f9f9f9;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 5px;
        }

        .analysis-section h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 18px;
        }

        .analysis-section p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
            margin: 10px 0;
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }

        .step-flow {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 15px 0;
        }

        .step {
            background: white;
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid #764ba2;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .step-number {
            display: inline-block;
            width: 25px;
            height: 25px;
            background: #764ba2;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 25px;
            font-weight: bold;
            margin-right: 10px;
        }

        .arrow {
            text-align: center;
            color: #764ba2;
            font-size: 20px;
            margin: -5px 0;
        }

        .info-box {
            background: #e7f3ff;
            border: 2px solid #2196F3;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .info-box h4 {
            color: #2196F3;
            margin-bottom: 10px;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .comparison-table th {
            background: #667eea;
            color: white;
        }

        .comparison-table tr:hover {
            background: #f5f5f5;
        }

        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
                height: auto;
            }
            
            .panel {
                min-height: 500px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å·¦ä¾§èŠå¤©é¢æ¿ -->
        <div class="panel">
            <div class="panel-header">
                ğŸ¤– ELIZA èŠå¤©æœºå™¨äºº
                <small>1966 å¹´ MIT å¼€å‘çš„ç¬¬ä¸€ä¸ªèŠå¤©æœºå™¨äºº</small>
            </div>
            <div class="chat-container">
                <div class="chat-messages" id="chatMessages">
                    <div class="system-message">
                        æ¬¢è¿ä½“éªŒ ELIZA! è¿™æ˜¯ AI å‘å±•å²ä¸Šçš„ç¬¬ä¸€ä¸ªèŠå¤©æœºå™¨äººã€‚<br>
                        è¯•è¯•é—®å®ƒå…³äº JavaScript çš„é—®é¢˜å§!
                    </div>
                </div>
                <div class="chat-input-area">
                    <div class="quick-questions">
                        <button class="quick-btn" onclick="quickAsk('JavaScript çš„æ§åˆ¶å°è¾“å‡ºè¯­å¥æ˜¯ä»€ä¹ˆ?')">
                            JavaScript æ§åˆ¶å°è¾“å‡º
                        </button>
                        <button class="quick-btn" onclick="quickAsk('console.log æ˜¯åšä»€ä¹ˆçš„?')">
                            console.log ç”¨æ³•
                        </button>
                        <button class="quick-btn" onclick="quickAsk('æˆ‘æƒ³å­¦ä¹  JavaScript')">
                            å­¦ä¹  JavaScript
                        </button>
                        <button class="quick-btn" onclick="quickAsk('I am tired')">
                            å¿ƒç†å’¨è¯¢æ¨¡å¼
                        </button>
                    </div>
                    <div class="input-group">
                        <input type="text" id="userInput" placeholder="è¾“å…¥ä½ çš„é—®é¢˜..." 
                               onkeypress="if(event.key==='Enter') sendMessage()">
                        <button id="sendBtn" onclick="sendMessage()">å‘é€</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- å³ä¾§è§£æé¢æ¿ -->
        <div class="panel">
            <div class="panel-header">
                ğŸ” å·¥ä½œåŸç†è§£æ
                <small>å®æ—¶æ˜¾ç¤º ELIZA çš„å¤„ç†è¿‡ç¨‹</small>
            </div>
            <div class="analysis-container" id="analysisContainer">
                <div class="info-box">
                    <h4>ğŸ’¡ ELIZA æ ¸å¿ƒåŸç†</h4>
                    <p><strong>å…³é”®è¯åŒ¹é… + æ¨¡æ¿å›å¤</strong></p>
                    <p>ELIZA ä¸ä¼š"ç†è§£"ä½ çš„è¯ï¼Œå®ƒåªæ˜¯:</p>
                    <ul style="margin-left: 20px; line-height: 1.8;">
                        <li>åœ¨ä½ çš„è¾“å…¥ä¸­æŸ¥æ‰¾å…³é”®è¯</li>
                        <li>æ ¹æ®å…³é”®è¯é€‰æ‹©é¢„è®¾çš„å›å¤æ¨¡æ¿</li>
                        <li>ç®€å•æ›¿æ¢äººç§°ä»£è¯</li>
                    </ul>
                </div>

                <div class="analysis-section">
                    <h3>ğŸ“Š æ•°æ®ç»“æ„</h3>
                    <div class="code-block">
elizaKeywords = [
  ["å…³é”®è¯", ä¼˜å…ˆçº§, [
    ["åŒ¹é…æ¨¡å¼", [
      "å›å¤æ¨¡æ¿1",
      "å›å¤æ¨¡æ¿2"
    ]]
  ]]
]

// ç¤ºä¾‹: JavaScript è§„åˆ™
["console", 15, [
  ["*", [
    "console.log(\"Hello, world!\");"
  ]]
]]</div>
                </div>

                <div class="analysis-section">
                    <h3>ğŸ”„ å¤„ç†æµç¨‹</h3>
                    <div class="step-flow">
                        <div class="step">
                            <span class="step-number">1</span>
                            <strong>æ–‡æœ¬é¢„å¤„ç†</strong>: è½¬å°å†™ã€æ¸…ç†æ ‡ç‚¹
                        </div>
                        <div class="arrow">â†“</div>
                        <div class="step">
                            <span class="step-number">2</span>
                            <strong>å…³é”®è¯åŒ¹é…</strong>: æŒ‰ä¼˜å…ˆçº§æ‰«æå…³é”®è¯
                        </div>
                        <div class="arrow">â†“</div>
                        <div class="step">
                            <span class="step-number">3</span>
                            <strong>æ¨¡å¼åˆ†è§£</strong>: åŒ¹é…å…·ä½“çš„å¥å­æ¨¡å¼
                        </div>
                        <div class="arrow">â†“</div>
                        <div class="step">
                            <span class="step-number">4</span>
                            <strong>é€‰æ‹©å›å¤</strong>: ä»æ¨¡æ¿åˆ—è¡¨ä¸­é€‰æ‹©
                        </div>
                        <div class="arrow">â†“</div>
                        <div class="step">
                            <span class="step-number">5</span>
                            <strong>å‚æ•°æ›¿æ¢</strong>: äººç§°è½¬æ¢ (Iâ†’you)
                        </div>
                        <div class="arrow">â†“</div>
                        <div class="step">
                            <span class="step-number">6</span>
                            <strong>åå¤„ç†</strong>: é¦–å­—æ¯å¤§å†™ã€æ ¼å¼åŒ–
                        </div>
                    </div>
                </div>

                <div class="analysis-section">
                    <h3>ğŸ“ˆ ELIZA vs ç°ä»£ AI</h3>
                    <table class="comparison-table">
                        <tr>
                            <th>ç‰¹æ€§</th>
                            <th>ELIZA (1966)</th>
                            <th>ChatGPT (2023)</th>
                        </tr>
                        <tr>
                            <td>å·¥ä½œåŸç†</td>
                            <td>å…³é”®è¯åŒ¹é…</td>
                            <td>æ·±åº¦å­¦ä¹ </td>
                        </tr>
                        <tr>
                            <td>è¯­ä¹‰ç†è§£</td>
                            <td>âŒ æ— </td>
                            <td>âœ… æœ‰</td>
                        </tr>
                        <tr>
                            <td>ä¸Šä¸‹æ–‡è®°å¿†</td>
                            <td>âŒ æå°‘</td>
                            <td>âœ… é•¿æœŸ</td>
                        </tr>
                        <tr>
                            <td>å›å¤æ–¹å¼</td>
                            <td>å›ºå®šæ¨¡æ¿</td>
                            <td>åŠ¨æ€ç”Ÿæˆ</td>
                        </tr>
                        <tr>
                            <td>ä»£ç é‡</td>
                            <td>~1000 è¡Œ</td>
                            <td>æ•°ç™¾ä¸‡è¡Œ</td>
                        </tr>
                        <tr>
                            <td>å‚æ•°é‡</td>
                            <td>0</td>
                            <td>1750 äº¿+</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ELIZA æ ¸å¿ƒå®ç° (ç®€åŒ–ç‰ˆï¼Œä½†åŒ…å«è°ƒè¯•åŠŸèƒ½)
        class ElizaBot {
            constructor() {
                this.keywords = [
                    {
                        key: "console",
                        rank: 15,
                        patterns: [
                            {
                                pattern: /.*/,
                                responses: ["console.log(\"Hello, world!\");"]
                            }
                        ]
                    },
                    {
                        key: "æ§åˆ¶å°",
                        rank: 15,
                        patterns: [
                            {
                                pattern: /.*/,
                                responses: ["å‚»å­ç¨‹åºconsole.log(\"Hello, world!\");"]
                            }
                        ]
                    },
                    {
                        key: "output",
                        rank: 12,
                        patterns: [
                            {
                                pattern: /.*/,
                                responses: ["console.log(\"Hello, world!\");"]
                            }
                        ]
                    },
                    {
                        key: "è¾“å‡º",
                        rank: 12,
                        patterns: [
                            {
                                pattern: /.*/,
                                responses: ["console.log(\"Hello, world!\");"]
                            }
                        ]
                    },
                    {
                        key: "javascript",
                        rank: 10,
                        patterns: [
                            {
                                pattern: /.*/,
                                responses: [
                                    "console.log(\"Hello, world!\");",
                                    "JavaScript is a powerful programming language.",
                                    "What would you like to know about JavaScript?"
                                ]
                            }
                        ]
                    },
                    {
                        key: "tired",
                        rank: 5,
                        patterns: [
                            {
                                pattern: /i am (.*)/i,
                                responses: [
                                    "Do you know anyone else who is $1?",
                                    "Do you believe it is normal to be $1?",
                                    "How long have you been $1?"
                                ]
                            }
                        ]
                    },
                    {
                        key: "sorry",
                        rank: 3,
                        patterns: [
                            {
                                pattern: /.*/,
                                responses: [
                                    "Please don't apologize.",
                                    "Apologies are not necessary.",
                                    "It did not bother me. Please continue."
                                ]
                            }
                        ]
                    },
                    {
                        key: "hello",
                        rank: 2,
                        patterns: [
                            {
                                pattern: /.*/,
                                responses: [
                                    "How do you do. Please state your problem.",
                                    "Hi. What seems to be your problem?"
                                ]
                            }
                        ]
                    }
                ];

                this.defaultResponses = [
                    "I'm not sure I understand you fully.",
                    "Please go on.",
                    "What does that suggest to you?",
                    "Tell me more about that.",
                    "I see. How does that make you feel?"
                ];

                // æŒ‰ rank æ’åº
                this.keywords.sort((a, b) => b.rank - a.rank);
                
                console.log("ğŸ¤– ELIZA åˆå§‹åŒ–å®Œæˆ");
                console.log("ğŸ“‹ å…³é”®è¯åˆ—è¡¨ (æŒ‰ä¼˜å…ˆçº§æ’åº):");
                this.keywords.forEach((kw, idx) => {
                    console.log(`  ${idx+1}. "${kw.key}" (ä¼˜å…ˆçº§: ${kw.rank})`);
                });
            }

            transform(text) {
                const analysis = {
                    original: text,
                    preprocessed: "",
                    matchedKeyword: null,
                    selectedResponse: "",
                    steps: []
                };

                // è°ƒè¯•ä¿¡æ¯ï¼šè®°å½•åŸå§‹è¾“å…¥
                console.log("\nğŸ” ELIZA ç½‘é¡µç‰ˆè°ƒè¯•å¼€å§‹");
                console.log("ğŸ“ åŸå§‹è¾“å…¥:", text);
                debugger; // æ–­ç‚¹1ï¼šæŸ¥çœ‹åŸå§‹è¾“å…¥

                // 1. é¢„å¤„ç†
                let processed = text.toLowerCase();
                console.log("ğŸ”„ è½¬æ¢ä¸ºå°å†™:", processed);
                
                processed = processed.replace(/[^a-z0-9\s\u4e00-\u9fa5]/g, ' ');
                processed = processed.replace(/\s+/g, ' ').trim();
                console.log("ğŸ§¹ æ¸…ç†åçš„æ–‡æœ¬:", processed);
                
                analysis.preprocessed = processed;
                analysis.steps.push({
                    step: "é¢„å¤„ç†",
                    result: processed
                });

                // 2. å…³é”®è¯åŒ¹é…
                console.log("\nğŸ” å¼€å§‹å…³é”®è¯åŒ¹é…...");
                console.log("ğŸ“‹ å…³é”®è¯åˆ—è¡¨ (æŒ‰ä¼˜å…ˆçº§æ’åº):");
                this.keywords.forEach((kw, idx) => {
                    console.log(`  ${idx+1}. "${kw.key}" (ä¼˜å…ˆçº§: ${kw.rank})`);
                });
                
                debugger; // æ–­ç‚¹2ï¼šæŸ¥çœ‹å…³é”®è¯åŒ¹é…è¿‡ç¨‹
                
                for (let keyword of this.keywords) {
                    const found = processed.includes(keyword.key);
                    console.log(`ğŸ” æ£€æŸ¥å…³é”®è¯ "${keyword.key}" (ä¼˜å…ˆçº§: ${keyword.rank}): ${found ? 'âœ… åŒ¹é…!' : 'âŒ ä¸åŒ¹é…'}`);
                    
                    if (found) {
                        console.log(`ğŸ¯ æ‰¾åˆ°åŒ¹é…çš„å…³é”®è¯: "${keyword.key}"`);
                        console.log(`â­ ä¼˜å…ˆçº§: ${keyword.rank}`);
                        console.log(`ğŸ” è¯¥å…³é”®è¯æœ‰ ${keyword.patterns.length} ä¸ªæ¨¡å¼è§„åˆ™:`);
                        
                        keyword.patterns.forEach((pattern, idx) => {
                            console.log(`  æ¨¡å¼ ${idx+1}: ${pattern.pattern}`);
                            console.log(`  å›å¤æ¨¡æ¿: [${pattern.responses.join(', ')}]`);
                        });
                        
                        debugger; // æ–­ç‚¹3ï¼šæ‰¾åˆ°åŒ¹é…çš„å…³é”®è¯æ—¶
                        
                        analysis.matchedKeyword = keyword;
                        analysis.steps.push({
                            step: "å…³é”®è¯åŒ¹é…",
                            result: `æ‰¾åˆ°å…³é”®è¯: "${keyword.key}" (ä¼˜å…ˆçº§: ${keyword.rank})`
                        });

                        // 3. æ¨¡å¼åŒ¹é…
                        for (let patternObj of keyword.patterns) {
                            const match = processed.match(patternObj.pattern);
                            console.log(`ğŸ” æµ‹è¯•æ¨¡å¼: "${patternObj.pattern}" -> ${match ? 'âœ… åŒ¹é…' : 'âŒ ä¸åŒ¹é…'}`);
                            
                            if (match) {
                                console.log(`ğŸ‰ æ¨¡å¼åŒ¹é…æˆåŠŸ!`);
                                if (match.length > 1) {
                                    console.log(`ğŸ“‹ æ•è·çš„å‚æ•°:`, match.slice(1));
                                }
                                
                                // 4. é€‰æ‹©å›å¤
                                const responseIndex = Math.floor(Math.random() * patternObj.responses.length);
                                const response = patternObj.responses[responseIndex];
                                
                                console.log(`ğŸ² å¯ç”¨å›å¤æ¨¡æ¿ ${patternObj.responses.length} ä¸ª:`);
                                patternObj.responses.forEach((template, idx) => {
                                    console.log(`  ${idx}: "${template}"`);
                                });
                                console.log(`ğŸ¯ é€‰ä¸­æ¨¡æ¿ ${responseIndex}: "${response}"`);
                                
                                debugger; // æ–­ç‚¹4ï¼šæŸ¥çœ‹å›å¤ç”Ÿæˆè¿‡ç¨‹
                                
                                // 5. å‚æ•°æ›¿æ¢
                                let finalResponse = response;
                                if (match[1]) {
                                    console.log(`ğŸ”„ å¼€å§‹å‚æ•°æ›¿æ¢...`);
                                    console.log(`ğŸ“ æ›¿æ¢å‚æ•°: "${match[1]}"`);
                                    finalResponse = response.replace('$1', match[1]);
                                    console.log(`âœ… å‚æ•°æ›¿æ¢å®Œæˆ: "${finalResponse}"`);
                                }

                                analysis.selectedResponse = finalResponse;
                                analysis.steps.push({
                                    step: "é€‰æ‹©å›å¤",
                                    result: finalResponse
                                });

                                // 6. é¦–å­—æ¯å¤§å†™
                                finalResponse = finalResponse.charAt(0).toUpperCase() + 
                                              finalResponse.slice(1);
                                
                                console.log(`ğŸ¨ æœ€ç»ˆå›å¤: "${finalResponse}"`);
                                console.log("âœ… åŒ¹é…æˆåŠŸï¼Œè¿”å›å›å¤");
                                console.log("ğŸ”š ELIZA ç½‘é¡µç‰ˆè°ƒè¯•ç»“æŸ\n");
                                
                                return { response: finalResponse, analysis };
                            }
                        }
                    }
                }

                // é»˜è®¤å›å¤
                console.log("âŒ æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„å…³é”®è¯ï¼Œä½¿ç”¨é»˜è®¤å›å¤");
                const defaultResponse = this.defaultResponses[
                    Math.floor(Math.random() * this.defaultResponses.length)
                ];
                
                console.log(`ğŸ’¬ é»˜è®¤å›å¤: "${defaultResponse}"`);
                
                analysis.steps.push({
                    step: "é»˜è®¤å›å¤",
                    result: "æœªæ‰¾åˆ°åŒ¹é…å…³é”®è¯ï¼Œä½¿ç”¨é»˜è®¤å›å¤"
                });

                console.log("ğŸ”š ELIZA ç½‘é¡µç‰ˆè°ƒè¯•ç»“æŸ\n");
                return { response: defaultResponse, analysis };
            }
        }

        const eliza = new ElizaBot();

        function addMessage(text, isUser) {
            const messagesDiv = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            
            messageDiv.innerHTML = `
                <div class="message-label">${isUser ? 'ä½ ' : 'ELIZA'}</div>
                <div class="message-content">${text}</div>
            `;
            
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function showAnalysis(analysis) {
            const container = document.getElementById('analysisContainer');
            
            let html = `
                <div class="info-box">
                    <h4>ğŸ’¡ æœ¬æ¬¡å¯¹è¯åˆ†æ</h4>
                    <p><strong>åŸå§‹è¾“å…¥:</strong> ${analysis.original}</p>
                </div>

                <div class="analysis-section">
                    <h3>ğŸ” å¤„ç†æ­¥éª¤</h3>
            `;

            analysis.steps.forEach((step, index) => {
                html += `
                    <div class="step">
                        <span class="step-number">${index + 1}</span>
                        <strong>${step.step}</strong>: ${step.result}
                    </div>
                `;
                if (index < analysis.steps.length - 1) {
                    html += '<div class="arrow">â†“</div>';
                }
            });

            html += '</div>';

            if (analysis.matchedKeyword) {
                html += `
                    <div class="analysis-section">
                        <h3>ğŸ¯ åŒ¹é…è¯¦æƒ…</h3>
                        <p><strong>å…³é”®è¯:</strong> <span class="highlight">${analysis.matchedKeyword.key}</span></p>
                        <p><strong>ä¼˜å…ˆçº§ (rank):</strong> ${analysis.matchedKeyword.rank}</p>
                        <p><strong>æœ€ç»ˆå›å¤:</strong> ${analysis.selectedResponse}</p>
                    </div>

                    <div class="info-box">
                        <h4>ğŸ§  ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªå›å¤?</h4>
                        <p>1. ELIZA åœ¨ä½ çš„è¾“å…¥ä¸­å‘ç°äº†å…³é”®è¯ "<strong>${analysis.matchedKeyword.key}</strong>"</p>
                        <p>2. è¿™ä¸ªå…³é”®è¯çš„ä¼˜å…ˆçº§æ˜¯ <strong>${analysis.matchedKeyword.rank}</strong> (æ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜)</p>
                        <p>3. ä»é¢„è®¾çš„å›å¤æ¨¡æ¿ä¸­éšæœºé€‰æ‹©äº†ä¸€ä¸ª</p>
                        <p>4. <strong>æ³¨æ„:</strong> ELIZA å¹¶ä¸ç†è§£ä½ çš„é—®é¢˜ï¼Œåªæ˜¯ç®€å•çš„æ¨¡å¼åŒ¹é…!</p>
                    </div>
                `;
            } else {
                html += `
                    <div class="info-box">
                        <h4>â“ ä¸ºä»€ä¹ˆæ˜¯è¿™ä¸ªå›å¤?</h4>
                        <p>ELIZA åœ¨ä½ çš„è¾“å…¥ä¸­æ²¡æœ‰æ‰¾åˆ°ä»»ä½•å·²çŸ¥çš„å…³é”®è¯ï¼Œæ‰€ä»¥ä½¿ç”¨äº†é€šç”¨çš„é»˜è®¤å›å¤ã€‚</p>
                        <p>è¿™äº›é»˜è®¤å›å¤è®¾è®¡å¾—å¾ˆå·§å¦™ï¼Œè®©å¯¹è¯å¯ä»¥ç»§ç»­ä¸‹å»ã€‚</p>
                    </div>
                `;
            }

            html += `
                <div class="analysis-section">
                    <h3>ğŸ’» å¯¹åº”ä»£ç </h3>
                    <div class="code-block">
// å…³é”®è¯å®šä¹‰
{
  key: "${analysis.matchedKeyword ? analysis.matchedKeyword.key : 'none'}",
  rank: ${analysis.matchedKeyword ? analysis.matchedKeyword.rank : 0},
  patterns: [
    {
      pattern: /åŒ¹é…æ¨¡å¼/,
      responses: [
        "${analysis.selectedResponse || 'é»˜è®¤å›å¤'}"
      ]
    }
  ]
}</div>
                </div>

                <div class="analysis-section">
                    <h3>ğŸ“ˆ ELIZA vs ç°ä»£ AI</h3>
                    <table class="comparison-table">
                        <tr>
                            <th>ç‰¹æ€§</th>
                            <th>ELIZA (1966)</th>
                            <th>ChatGPT (2023)</th>
                        </tr>
                        <tr>
                            <td>å·¥ä½œåŸç†</td>
                            <td>å…³é”®è¯åŒ¹é…</td>
                            <td>æ·±åº¦å­¦ä¹ </td>
                        </tr>
                        <tr>
                            <td>è¯­ä¹‰ç†è§£</td>
                            <td>âŒ æ— </td>
                            <td>âœ… æœ‰</td>
                        </tr>
                        <tr>
                            <td>ä¸Šä¸‹æ–‡è®°å¿†</td>
                            <td>âŒ æå°‘</td>
                            <td>âœ… é•¿æœŸ</td>
                        </tr>
                        <tr>
                            <td>å›å¤æ–¹å¼</td>
                            <td>å›ºå®šæ¨¡æ¿</td>
                            <td>åŠ¨æ€ç”Ÿæˆ</td>
                        </tr>
                    </table>
                </div>
            `;

            container.innerHTML = html;
        }

        function sendMessage() {
            const input = document.getElementById('userInput');
            const text = input.value.trim();
            
            if (!text) return;

            // æ˜¾ç¤ºç”¨æˆ·æ¶ˆæ¯
            addMessage(text, true);
            input.value = '';

            // è·å– ELIZA å›å¤
            setTimeout(() => {
                console.log("ğŸš€ å¼€å§‹å¤„ç†ç”¨æˆ·è¾“å…¥:", text);
                console.log("ğŸ”§ æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12) æŸ¥çœ‹è¯¦ç»†è°ƒè¯•ä¿¡æ¯!");
                debugger; // ä¸»è°ƒè¯•æ–­ç‚¹ï¼šå¼€å§‹å¤„ç†ç”¨æˆ·è¾“å…¥
                
                const result = eliza.transform(text);
                addMessage(result.response, false);
                showAnalysis(result.analysis);
            }, 500);
        }

        function quickAsk(question) {
            document.getElementById('userInput').value = question;
            sendMessage();
        }

        // åˆå§‹åŒ–
        window.onload = function() {
            addMessage("Hello! I am ELIZA. How can I help you today?", false);
        };
    </script>
</body>
</html>

